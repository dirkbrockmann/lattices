!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.lattices=t():n.lattices=t()}(this,(()=>(()=>{"use strict";var n={d:(t,r)=>{for(var e in r)n.o(r,e)&&!n.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:r[e]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t),r:n=>{void 0!==i&&i.toStringTag&&Object.defineProperty(n,i.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{hex:()=>sn,square:()=>on});const r=function(n){return n},e=function(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)};var o=Math.max;const a="object"==typeof global&&global&&global.Object===Object&&global;var c="object"==typeof self&&self&&self.Object===Object&&self;const l=a||c||Function("return this")();var i=l.Symbol;const u=i;var f=Object.prototype,s=f.hasOwnProperty,m=f.toString,h=u?u.toStringTag:void 0;var y=Object.prototype.toString;var v=u?u.toStringTag:void 0;const b=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":v&&v in Object(n)?function(n){var t=s.call(n,h),r=n[h];try{n[h]=void 0;var e=!0}catch(n){}var o=m.call(n);return e&&(t?n[h]=r:delete n[h]),o}(n):function(n){return y.call(n)}(n)},p=function(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)},d=function(n){if(!p(n))return!1;var t=b(n);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},x=l["__core-js_shared__"];var g,M=(g=/[^.]+$/.exec(x&&x.keys&&x.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";var j=Function.prototype.toString;var S=/^\[object .+?Constructor\]$/,E=Function.prototype,O=Object.prototype,P=E.toString,$=O.hasOwnProperty,_=RegExp("^"+P.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const w=function(n){return!(!p(n)||(t=n,M&&M in t))&&(d(n)?_:S).test(function(n){if(null!=n){try{return j.call(n)}catch(n){}try{return n+""}catch(n){}}return""}(n));var t},A=function(){try{var n=(t=function(n,t){return null==n?void 0:n[t]}(Object,"defineProperty"),w(t)?t:void 0);return n({},"",{}),n}catch(n){}var t}(),N=A?function(n,t){return A(n,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:r;var F=Date.now;const q=(T=N,L=0,I=0,function(){var n=F(),t=16-(n-I);if(I=n,t>0){if(++L>=800)return arguments[0]}else L=0;return T.apply(void 0,arguments)});var T,L,I;const k=function(n){return null!=n&&function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}(n.length)&&!d(n)},z=function(n){return null!=n&&"object"==typeof n};var R=Math.max;const C=function(n,t){return q(function(n,t,r){return t=o(void 0===t?n.length-1:t,0),function(){for(var a=arguments,c=-1,l=o(a.length-t,0),i=Array(l);++c<l;)i[c]=a[t+c];c=-1;for(var u=Array(t+1);++c<t;)u[c]=a[c];return u[t]=r(i),e(n,this,u)}}(n,t,r),n+"")}((function(n){if(!n||!n.length)return[];var t=0;return n=function(n,t){for(var r=-1,e=null==n?0:n.length,o=0,a=[];++r<e;){var c=n[r];t(c,r,n)&&(a[o++]=c)}return a}(n,(function(n){if(z(r=n)&&k(r))return t=R(n.length,t),!0;var r})),function(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}(t,(function(t){return function(n,t){for(var r=-1,e=null==n?0:n.length,o=Array(e);++r<e;)o[r]=t(n[r],r,n);return o}(n,(r=t,function(n){return null==n?void 0:n[r]}));var r}))}));var D=Math.ceil,G=Math.max;var U=/^(?:0|[1-9]\d*)$/;const B=function(n,t,r){if(!p(r))return!1;var e=typeof t;return!!("number"==e?k(r)&&function(n,t){var r=typeof n;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&U.test(n))&&n>-1&&n%1==0&&n<t}(t,r.length):"string"==e&&t in r)&&function(n,t){return n===t||n!=n&&t!=t}(r[t],n)};var H=/\s/;var J=/^\s+/;const K=function(n){return n?n.slice(0,function(n){for(var t=n.length;t--&&H.test(n.charAt(t)););return t}(n)+1).replace(J,""):n};var Q=/^[-+]0x[0-9a-f]+$/i,V=/^0b[01]+$/i,W=/^0o[0-7]+$/i,X=parseInt;const Y=function(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||z(n)&&"[object Symbol]"==b(n)}(n))return NaN;if(p(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=p(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=K(n);var r=V.test(n);return r||W.test(n)?X(n.slice(2),r?2:8):Q.test(n)?NaN:+n};const Z=function(n){return n?Infinity===(n=Y(n))||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0},nn=function(n,t,r){return r&&"number"!=typeof r&&B(n,t,r)&&(t=r=void 0),n=Z(n),void 0===t?(t=n,n=0):t=Z(t),function(n,t,r,e){for(var o=-1,a=G(D((t-n)/(r||1)),0),c=Array(a);a--;)c[e?a:++o]=n,n+=r;return c}(n,t,r=void 0===r?n<t?1:-1:Z(r),void 0)};function tn(n,t){return[n%t,Math.floor(n/t)]}const rn={n4:C([-1,1,0,0],[0,0,-1,1]),n8:C([-1,0,1,1,1,0,-1,-1],[-1,-1,-1,0,1,1,1,0])};function en(n,t,r="periodic",e="n8"){const o=[];return rn[e].forEach((e=>{var a=e[1],c=e[0];const l=tn(n,t),i=l[0]+c,u=l[1]+a;("dirichlet"==r?(0!=a||0!=c)&&i<t&&u<t&&i>=0&&u>=0:0!=a||0!=c)&&o.push(t*((u+t)%t)+(i+t)%t)})),o}const on=function(n){var t="periodic",r=1,e="n8";const o=2*n+1;var a=r/o,c=a;const l=nn(o*o).map((function(n){const t=tn(n,o);return{m:t[0],n:t[1],x:a*(t[0]+.5)-r/2,y:c*(t[1]+.5)-r/2}}));return l.forEach((function(n,r){n.neighbors=en(r,o,t,e).map((n=>l[n])),n.cell=()=>[{x:n.x+a/2,y:n.y+c/2},{x:n.x-a/2,y:n.y+c/2},{x:n.x-a/2,y:n.y-c/2},{x:n.x+a/2,y:n.y-c/2},{x:n.x+a/2,y:n.y+c/2}]})),{type:"square",L:r,N:n,size:o*o,hood:function(n){return void 0!==n?(l.forEach((function(r,e){r.neighbors=en(e,o,t,n).map((n=>l[n]))})),e=n,this):e},nodes:l,scale:function(n){return void 0!==n?(l.forEach((function(t){t.x=(t.m+.5)*n/o-n/2,t.y=(t.n+.5)*n/o-n/2})),a=(r=n)/o,c=r/o,this.L=r,this):r},boundary:function(n){return void 0!==n?(l.forEach((function(t,r){t.neighbors=en(r,o,n,e).map((n=>l[n]))})),t=n,this):t}}},an=[1,0],cn=[.5,Math.sqrt(3)/2],ln=[{l:1,m:0,n:-1},{l:1,m:-1,n:0},{l:0,m:-1,n:1},{l:0,m:1,n:-1},{l:-1,m:0,n:1},{l:-1,m:1,n:0}],un=[[ln[0],ln[1]],[ln[1],ln[2]],[ln[2],ln[4]],[ln[4],ln[5]],[ln[5],ln[3]],[ln[3],ln[0]]];function fn(n){return"id_l"+n.l+"m"+n.m+"n"+n.n}const sn=function(n){var t="periodic",r=1,e=r/(2*n+1);const o=[],a={};return nn(-n,n+1).forEach((function(t){nn(-n,n+1).forEach((function(r){nn(-n,n+1).forEach((function(n){t+r+n==0&&o.push({l:t,m:r,n,x:e*t*an[0]+e*r*cn[0],y:e*t*an[1]+e*r*cn[1]})}))}))})),o.forEach((function(n){a[fn(n)]=n,n.cell=()=>{const t=1/Math.sqrt(3);return[{x:n.x+e/2,y:n.y+t*e/2},{x:n.x,y:n.y+t*e},{x:n.x-e/2,y:n.y+t*e/2},{x:n.x-e/2,y:n.y-t*e/2},{x:n.x,y:n.y-t*e},{x:n.x+e/2,y:n.y-t*e/2},{x:n.x+e/2,y:n.y+t*e/2}]}})),"periodic"===t?l(o):c(o),{type:"hexagonal",L:r,N:n,size:1+3*n*(n+1),nodes:o,scale:function(t){return void 0!==t?(e=(r=t)/(2*n+1),o.forEach((n=>{n.x=e*n.l*an[0]+e*n.m*cn[0],n.y=e*n.l*an[1]+e*n.m*cn[1]})),this.L=r,this):r},boundary:function(n){return void 0!==n?("dirichlet"==n?(t="dirichlet",c(o)):(t="periodic",l(o)),this):t},cell:function(t){var r=1/Math.sqrt(3);return[{x:t.x+Scale/n/2,y:t.y+r/2*Scale/n},{x:t.x,y:t.y+r*Scale/n},{x:t.x-Scale/n/2,y:t.y+r/2*Scale/n},{x:t.x-Scale/n/2,y:t.y-r/2*Scale/n},{x:t.x,y:t.y-r*Scale/n},{x:t.x+Scale/n/2,y:t.y-r/2*Scale/n},{x:t.x+Scale/n/2,y:t.y+r/2*Scale/n}]}};function c(n){n.forEach((function(n){n.neighbors=[],ln.forEach((function(t){const r=fn({l:n.l+t.l,m:n.m+t.m,n:n.n+t.n}),e=a[r];void 0!==e&&n.neighbors.push(e)}))})),n.forEach((function(n){n.triangles=[],un.forEach((function(t){const r=fn({l:n.l+t[0].l,m:n.m+t[0].m,n:n.n+t[0].n}),e=fn({l:n.l+t[1].l,m:n.m+t[1].m,n:n.n+t[1].n});void 0!==a[r]&&void 0!==a[e]&&n.triangles.push([a[r],a[e]])}))}))}function l(t){t.forEach((function(t){t.neighbors=[],ln.forEach((function(r){var e=fn({l:t.l+r.l,m:t.m+r.m,n:t.n+r.n});void 0===a[e]&&(t.l+r.l==n+1&&Math.abs(t.m+r.m)<=n+1&&Math.abs(t.n+r.n)<=n&&(e=fn({l:t.l+r.l-(2*n+1),m:t.m+r.m+(n+1),n:t.n+r.n+n})),t.l+r.l==-(n+1)&&Math.abs(t.m+r.m)<=n+1&&Math.abs(t.n+r.n)<=n&&(e=fn({l:t.l+r.l+(2*n+1),m:t.m+r.m-(n+1),n:t.n+r.n-n})),t.m+r.m==n+1&&Math.abs(t.l+r.l)<=n&&Math.abs(t.n+r.n)<=n+1&&(e=fn({m:t.m+r.m-(2*n+1),n:t.n+r.n+(n+1),l:t.l+r.l+n})),t.m+r.m==-(n+1)&&Math.abs(t.l+r.l)<=n&&Math.abs(t.n+r.n)<=n+1&&(e=fn({m:t.m+r.m+(2*n+1),n:t.n+r.n-(n+1),l:t.l+r.l-n})),t.n+r.n==n+1&&Math.abs(t.l+r.l)<=n+1&&Math.abs(t.m+r.m)<=n&&(e=fn({n:t.n+r.n-(2*n+1),l:t.l+r.l+(n+1),m:t.m+r.m+n})),t.n+r.n==-(n+1)&&Math.abs(t.l+r.l)<=n+1&&Math.abs(t.m+r.m)<=n&&(e=fn({n:t.n+r.n+(2*n+1),l:t.l+r.l-(n+1),m:t.m+r.m-n}))),t.neighbors.push(a[e])}))})),t.forEach((function(t){t.triangles=[],un.forEach((function(r){var e=[];r.forEach((function(r,o){var c=fn({l:t.l+r.l,m:t.m+r.m,n:t.n+r.n});void 0===a[c]&&(t.l+r.l==n+1&&Math.abs(t.m+r.m)<=n+1&&Math.abs(t.n+r.n)<=n&&fn({l:t.l+r.l-(2*n+1),m:t.m+r.m+(n+1),n:t.n+r.n+n}),t.l+r.l==-(n+1)&&Math.abs(t.m+r.m)<=n+1&&Math.abs(t.n+r.n)<=n&&fn({l:t.l+r.l+(2*n+1),m:t.m+r.m-(n+1),n:t.n+r.n-n}),t.m+r.m==n+1&&Math.abs(t.l+r.l)<=n&&Math.abs(t.n+r.n)<=n+1&&fn({m:t.m+r.m-(2*n+1),n:t.n+r.n+(n+1),l:t.l+r.l+n}),t.m+r.m==-(n+1)&&Math.abs(t.l+r.l)<=n&&Math.abs(t.n+r.n)<=n+1&&fn({m:t.m+r.m+(2*n+1),n:t.n+r.n-(n+1),l:t.l+r.l-n}),t.n+r.n==n+1&&Math.abs(t.l+r.l)<=n+1&&Math.abs(t.m+r.m)<=n&&fn({n:t.n+r.n-(2*n+1),l:t.l+r.l+(n+1),m:t.m+r.m+n}),t.n+r.n==-(n+1)&&Math.abs(t.l+r.l)<=n+1&&Math.abs(t.m+r.m)<=n&&fn({n:t.n+r.n+(2*n+1),l:t.l+r.l-(n+1),m:t.m+r.m-n})),e[o]=c})),t.triangles.push([a[e[0]],a[e[1]]])}))}))}};return t})()));