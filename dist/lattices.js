!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.lattices=t():n.lattices=t()}(this,(()=>(()=>{"use strict";var n={d:(t,r)=>{for(var o in r)n.o(r,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(n,t)=>Object.prototype.hasOwnProperty.call(n,t),r:n=>{void 0!==l&&l.toStringTag&&Object.defineProperty(n,l.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})}},t={};n.r(t),n.d(t,{hex:()=>sn,square:()=>en,square_simple:()=>yn});const r=function(n){return n},o=function(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)};var e=Math.max;const c="object"==typeof global&&global&&global.Object===Object&&global;var a="object"==typeof self&&self&&self.Object===Object&&self;const i=c||a||Function("return this")();var l=i.Symbol;const u=l;var f=Object.prototype,s=f.hasOwnProperty,m=f.toString,h=u?u.toStringTag:void 0;var y=Object.prototype.toString;var v=u?u.toStringTag:void 0;const b=function(n){return null==n?void 0===n?"[object Undefined]":"[object Null]":v&&v in Object(n)?function(n){var t=s.call(n,h),r=n[h];try{n[h]=void 0;var o=!0}catch(n){}var e=m.call(n);return o&&(t?n[h]=r:delete n[h]),e}(n):function(n){return y.call(n)}(n)},p=function(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)},x=function(n){if(!p(n))return!1;var t=b(n);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t},d=i["__core-js_shared__"];var g,M=(g=/[^.]+$/.exec(d&&d.keys&&d.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"";var j=Function.prototype.toString;var E=/^\[object .+?Constructor\]$/,S=Function.prototype,O=Object.prototype,_=S.toString,P=O.hasOwnProperty,$=RegExp("^"+_.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const N=function(n){return!(!p(n)||(t=n,M&&M in t))&&(x(n)?$:E).test(function(n){if(null!=n){try{return j.call(n)}catch(n){}try{return n+""}catch(n){}}return""}(n));var t},q=function(){try{var n=(t=function(n,t){return null==n?void 0:n[t]}(Object,"defineProperty"),N(t)?t:void 0);return n({},"",{}),n}catch(n){}var t}(),w=q?function(n,t){return q(n,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:r;var A=Date.now;const F=(L=w,T=0,z=0,function(){var n=A(),t=16-(n-z);if(z=n,t>0){if(++T>=800)return arguments[0]}else T=0;return L.apply(void 0,arguments)});var L,T,z;const I=function(n){return null!=n&&function(n){return"number"==typeof n&&n>-1&&n%1==0&&n<=9007199254740991}(n.length)&&!x(n)},k=function(n){return null!=n&&"object"==typeof n};var R=Math.max;const C=function(n,t){return F(function(n,t,r){return t=e(void 0===t?n.length-1:t,0),function(){for(var c=arguments,a=-1,i=e(c.length-t,0),l=Array(i);++a<i;)l[a]=c[t+a];a=-1;for(var u=Array(t+1);++a<t;)u[a]=c[a];return u[t]=r(l),o(n,this,u)}}(n,t,r),n+"")}((function(n){if(!n||!n.length)return[];var t=0;return n=function(n,t){for(var r=-1,o=null==n?0:n.length,e=0,c=[];++r<o;){var a=n[r];t(a,r,n)&&(c[e++]=a)}return c}(n,(function(n){if(k(r=n)&&I(r))return t=R(n.length,t),!0;var r})),function(n,t){for(var r=-1,o=Array(n);++r<n;)o[r]=t(r);return o}(t,(function(t){return function(n,t){for(var r=-1,o=null==n?0:n.length,e=Array(o);++r<o;)e[r]=t(n[r],r,n);return e}(n,(r=t,function(n){return null==n?void 0:n[r]}));var r}))}));var D=Math.ceil,G=Math.max;var U=/^(?:0|[1-9]\d*)$/;const B=function(n,t,r){if(!p(r))return!1;var o=typeof t;return!!("number"==o?I(r)&&function(n,t){var r=typeof n;return!!(t=null==t?9007199254740991:t)&&("number"==r||"symbol"!=r&&U.test(n))&&n>-1&&n%1==0&&n<t}(t,r.length):"string"==o&&t in r)&&function(n,t){return n===t||n!=n&&t!=t}(r[t],n)};var H=/\s/;var J=/^\s+/;const K=function(n){return n?n.slice(0,function(n){for(var t=n.length;t--&&H.test(n.charAt(t)););return t}(n)+1).replace(J,""):n};var Q=/^[-+]0x[0-9a-f]+$/i,V=/^0b[01]+$/i,W=/^0o[0-7]+$/i,X=parseInt;const Y=function(n){if("number"==typeof n)return n;if(function(n){return"symbol"==typeof n||k(n)&&"[object Symbol]"==b(n)}(n))return NaN;if(p(n)){var t="function"==typeof n.valueOf?n.valueOf():n;n=p(t)?t+"":t}if("string"!=typeof n)return 0===n?n:+n;n=K(n);var r=V.test(n);return r||W.test(n)?X(n.slice(2),r?2:8):Q.test(n)?NaN:+n};const Z=function(n){return n?Infinity===(n=Y(n))||n===-1/0?17976931348623157e292*(n<0?-1:1):n==n?n:0:0===n?n:0},nn=function(n,t,r){return r&&"number"!=typeof r&&B(n,t,r)&&(t=r=void 0),n=Z(n),void 0===t?(t=n,n=0):t=Z(t),function(n,t,r,o){for(var e=-1,c=G(D((t-n)/(r||1)),0),a=Array(c);c--;)a[o?c:++e]=n,n+=r;return a}(n,t,r=void 0===r?n<t?1:-1:Z(r),void 0)};function tn(n,t){return[n%t,Math.floor(n/t)]}const rn={n4:C([-1,1,0,0],[0,0,-1,1]),n8:C([-1,0,1,1,1,0,-1,-1],[-1,-1,-1,0,1,1,1,0])};function on(n,t,r="periodic",o="n8"){const e=[];return rn[o].forEach((o=>{var c=o[1],a=o[0];const i=tn(n,t),l=i[0]+a,u=i[1]+c;("dirichlet"==r?(0!=c||0!=a)&&l<t&&u<t&&l>=0&&u>=0:0!=c||0!=a)&&e.push(t*((u+t)%t)+(l+t)%t)})),e}const en=function(n){var t="periodic",r=1,o="n8";const e=2*n+1;var c=r/e,a=c;const i=nn(e*e).map((function(n){const t=tn(n,e);return{m:t[0],n:t[1],x:c*(t[0]+.5)-r/2,y:a*(t[1]+.5)-r/2}}));return i.forEach((function(n,r){n.neighbors=on(r,e,t,o).map((n=>i[n])),n.cell=()=>[{x:n.x+c/2,y:n.y+a/2},{x:n.x-c/2,y:n.y+a/2},{x:n.x-c/2,y:n.y-a/2},{x:n.x+c/2,y:n.y-a/2},{x:n.x+c/2,y:n.y+a/2}]})),{type:"square",L:r,N:n,size:e*e,hood:function(n){return void 0!==n?(i.forEach((function(r,o){r.neighbors=on(o,e,t,n).map((n=>i[n]))})),o=n,this):o},nodes:i,scale:function(n){return void 0!==n?(i.forEach((function(t){t.x=(t.m+.5)*n/e-n/2,t.y=(t.n+.5)*n/e-n/2})),c=(r=n)/e,a=r/e,this.L=r,this):r},boundary:function(n){return void 0!==n?(i.forEach((function(t,r){t.neighbors=on(r,e,n,o).map((n=>i[n]))})),t=n,this):t}}},cn=[1,0],an=[.5,Math.sqrt(3)/2],ln=[{l:1,m:0,n:-1},{l:1,m:-1,n:0},{l:0,m:-1,n:1},{l:0,m:1,n:-1},{l:-1,m:0,n:1},{l:-1,m:1,n:0}],un=[[ln[0],ln[1]],[ln[1],ln[2]],[ln[2],ln[4]],[ln[4],ln[5]],[ln[5],ln[3]],[ln[3],ln[0]]];function fn(n){return"id_l"+n.l+"m"+n.m+"n"+n.n}const sn=function(n){var t="periodic",r=1,o=r/(2*n+1);const e=[],c={};return nn(-n,n+1).forEach((function(t){nn(-n,n+1).forEach((function(r){nn(-n,n+1).forEach((function(n){t+r+n==0&&e.push({l:t,m:r,n,x:o*t*cn[0]+o*r*an[0],y:o*t*cn[1]+o*r*an[1]})}))}))})),e.forEach((function(n){c[fn(n)]=n,n.cell=()=>{const t=1/Math.sqrt(3);return[{x:n.x+o/2,y:n.y+t*o/2},{x:n.x,y:n.y+t*o},{x:n.x-o/2,y:n.y+t*o/2},{x:n.x-o/2,y:n.y-t*o/2},{x:n.x,y:n.y-t*o},{x:n.x+o/2,y:n.y-t*o/2},{x:n.x+o/2,y:n.y+t*o/2}]}})),"periodic"===t?i(e):a(e),{type:"hexagonal",L:r,N:n,size:1+3*n*(n+1),nodes:e,scale:function(t){return void 0!==t?(o=(r=t)/(2*n+1),e.forEach((n=>{n.x=o*n.l*cn[0]+o*n.m*an[0],n.y=o*n.l*cn[1]+o*n.m*an[1]})),this.L=r,this):r},boundary:function(n){return void 0!==n?("dirichlet"==n?(t="dirichlet",a(e)):(t="periodic",i(e)),this):t},cell:function(t){var r=1/Math.sqrt(3);return[{x:t.x+Scale/n/2,y:t.y+r/2*Scale/n},{x:t.x,y:t.y+r*Scale/n},{x:t.x-Scale/n/2,y:t.y+r/2*Scale/n},{x:t.x-Scale/n/2,y:t.y-r/2*Scale/n},{x:t.x,y:t.y-r*Scale/n},{x:t.x+Scale/n/2,y:t.y-r/2*Scale/n},{x:t.x+Scale/n/2,y:t.y+r/2*Scale/n}]}};function a(n){n.forEach((function(n){n.neighbors=[],ln.forEach((function(t){const r=fn({l:n.l+t.l,m:n.m+t.m,n:n.n+t.n}),o=c[r];void 0!==o&&n.neighbors.push(o)}))})),n.forEach((function(n){n.triangles=[],un.forEach((function(t){const r=fn({l:n.l+t[0].l,m:n.m+t[0].m,n:n.n+t[0].n}),o=fn({l:n.l+t[1].l,m:n.m+t[1].m,n:n.n+t[1].n});void 0!==c[r]&&void 0!==c[o]&&n.triangles.push([c[r],c[o]])}))}))}function i(t){t.forEach((function(t){t.neighbors=[],ln.forEach((function(r){var o=fn({l:t.l+r.l,m:t.m+r.m,n:t.n+r.n});void 0===c[o]&&(t.l+r.l==n+1&&Math.abs(t.m+r.m)<=n+1&&Math.abs(t.n+r.n)<=n&&(o=fn({l:t.l+r.l-(2*n+1),m:t.m+r.m+(n+1),n:t.n+r.n+n})),t.l+r.l==-(n+1)&&Math.abs(t.m+r.m)<=n+1&&Math.abs(t.n+r.n)<=n&&(o=fn({l:t.l+r.l+(2*n+1),m:t.m+r.m-(n+1),n:t.n+r.n-n})),t.m+r.m==n+1&&Math.abs(t.l+r.l)<=n&&Math.abs(t.n+r.n)<=n+1&&(o=fn({m:t.m+r.m-(2*n+1),n:t.n+r.n+(n+1),l:t.l+r.l+n})),t.m+r.m==-(n+1)&&Math.abs(t.l+r.l)<=n&&Math.abs(t.n+r.n)<=n+1&&(o=fn({m:t.m+r.m+(2*n+1),n:t.n+r.n-(n+1),l:t.l+r.l-n})),t.n+r.n==n+1&&Math.abs(t.l+r.l)<=n+1&&Math.abs(t.m+r.m)<=n&&(o=fn({n:t.n+r.n-(2*n+1),l:t.l+r.l+(n+1),m:t.m+r.m+n})),t.n+r.n==-(n+1)&&Math.abs(t.l+r.l)<=n+1&&Math.abs(t.m+r.m)<=n&&(o=fn({n:t.n+r.n+(2*n+1),l:t.l+r.l-(n+1),m:t.m+r.m-n}))),t.neighbors.push(c[o])}))})),t.forEach((function(t){t.triangles=[],un.forEach((function(r){var o=[];r.forEach((function(r,e){var a=fn({l:t.l+r.l,m:t.m+r.m,n:t.n+r.n});void 0===c[a]&&(t.l+r.l==n+1&&Math.abs(t.m+r.m)<=n+1&&Math.abs(t.n+r.n)<=n&&fn({l:t.l+r.l-(2*n+1),m:t.m+r.m+(n+1),n:t.n+r.n+n}),t.l+r.l==-(n+1)&&Math.abs(t.m+r.m)<=n+1&&Math.abs(t.n+r.n)<=n&&fn({l:t.l+r.l+(2*n+1),m:t.m+r.m-(n+1),n:t.n+r.n-n}),t.m+r.m==n+1&&Math.abs(t.l+r.l)<=n&&Math.abs(t.n+r.n)<=n+1&&fn({m:t.m+r.m-(2*n+1),n:t.n+r.n+(n+1),l:t.l+r.l+n}),t.m+r.m==-(n+1)&&Math.abs(t.l+r.l)<=n&&Math.abs(t.n+r.n)<=n+1&&fn({m:t.m+r.m+(2*n+1),n:t.n+r.n-(n+1),l:t.l+r.l-n}),t.n+r.n==n+1&&Math.abs(t.l+r.l)<=n+1&&Math.abs(t.m+r.m)<=n&&fn({n:t.n+r.n-(2*n+1),l:t.l+r.l+(n+1),m:t.m+r.m+n}),t.n+r.n==-(n+1)&&Math.abs(t.l+r.l)<=n+1&&Math.abs(t.m+r.m)<=n&&fn({n:t.n+r.n+(2*n+1),l:t.l+r.l-(n+1),m:t.m+r.m-n})),o[e]=a})),t.triangles.push([c[o[0]],c[o[1]]])}))}))}},mn={n4:C([-1,1,0,0],[0,0,-1,1]),n8:C([-1,0,1,1,1,0,-1,-1],[-1,-1,-1,0,1,1,1,0])};function hn(n,t,r="periodic",o="n8"){const e=[];return mn[o].forEach((o=>{var c=o[1],a=o[0];const i=tn(n,t),l=i[0]+a,u=i[1]+c;("dirichlet"==r?(0!=c||0!=a)&&l<t&&u<t&&l>=0&&u>=0:0!=c||0!=a)&&e.push(t*((u+t)%t)+(l+t)%t)})),e}const yn=function(n){var t="periodic",r=n,o="n8";const e=nn(n*n).map((function(t){const r=tn(t,n);return{x:r[0],y:r[1]}}));return e.forEach((function(r,c){r.neighbors=hn(c,n,t,o).map((n=>e[n])),r.cell=()=>[{x:r.x,y:r.y},{x:r.x+1,y:r.y},{x:r.x+1,y:r.y+1},{x:r.x,y:r.y+1},{x:r.x,y:r.y}]})),{type:"square",L:r,N:n,size:n,hood:function(r){return void 0!==r?(e.forEach((function(o,c){o.neighbors=hn(c,n,t,r).map((n=>e[n]))})),o=r,this):o},nodes:e,scale:function(t){return n},boundary:function(r){return void 0!==r?(e.forEach((function(t,c){t.neighbors=hn(c,n,r,o).map((n=>e[n]))})),t=r,this):t}}};return t})()));